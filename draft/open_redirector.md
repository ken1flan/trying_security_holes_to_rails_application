# オープンリダイレクタ

## リダイレクターとは？

あるURLにアクセスすると、他のURLへジャンプさせる機能です。
ジャンプさせるためにサーバ側で処理を入れるので、その間でいろいろなことができます。
例えば、リダイレクトさせたときに回数を数えたり、リクエストの情報を保存したりします。

内部ではいろいろしていますが、ユーザはただURLが変わっただけにしか見えません。

それでは実際に試してみましょう。

### その1 クライアントへの誘導数をカウントする

このアプリケーションには、クライアントから請け負ったキャンペーンのページがあります。

http://localhost:3000/campaigns/cool_something

このページにある `Visit cool something site` ボタンをクリックすると、英語版WikipediaのCatの項目にジャンプします。

### その2 クライアントからの誘導数をカウントする

外部の提携先に依頼してキャンペーンページを作ってもらい、そこからこのアプリケーションに誘導してもらいます。
外部の提携先のキャンペーンページのつもりで、 `outside/redirector/cool_site_campaign.html`という名前のファイルをブラウザで開いてください。

このページにある `Visit secuiry sample` をクリックすると、このアプリケーションのトップページにジャンプします。

## オープンリダイレクタ脆弱性

リダイレクターの機能は便利ですが、これを自由に外部の人も使えるとしたらどうでしょう？
想像しながら、実際に試してみましょう。

### その1 悪意のあるサイトで利用

悪意のある人が自身のページに、このリダイレクターを使ったリンクを設置して、悪意のあるサイトに誘導します。

### その2 悪意のあるメールで利用

### オープンリダイレクタとは？

このように、サイトの管理者以外のひとが自由にリダイレクト先を設定できることをいいます。
URLが一見このアプリケーション内のリンクに見えるので、フィッシングサイトやスパムメールで被害者を騙すことに使われる可能性があります。

## 直し方

